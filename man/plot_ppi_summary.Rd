% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/get_ppi.R
\name{plot_ppi_summary}
\alias{plot_ppi_summary}
\title{Plot summary of altered PPI interactions}
\usage{
plot_ppi_summary(
  df,
  bins = 30,
  palette = c(no = "grey80", yes = "deeppink4", INC = "#2b8cbe", EXC = "#e34a33"),
  output_file = NULL,
  width = 9,
  height = 4.8
)
}
\arguments{
\item{df}{`data.table` or `data.frame` with PPI counts per event,
as returned by [ppi_switches_for_hits()].}

\item{bins}{Integer; number of histogram bins (default `30`).}

\item{palette}{Named character vector of fill colors for the plot
(default includes `"no"`, `"yes"`, `"INC"`, `"EXC"`).}

\item{output_file}{Optional path to save the figure (`.png` or `.pdf`).}

\item{width, height}{Numeric dimensions (in inches) for saved plot.}
}
\value{
A `ggplot` object combining two panels (using `patchwork`).
}
\description{
Visualizes the frequency and magnitude of gained/lost PPIs per event,
using a dual-panel layout:
- left: proportion of events with any PPI change
- right: histograms of INC and EXC partner counts (non-zero only)
}
\examples{
sample_frame <- data.frame(path = c(check_extdata_dir('rawData/control_S5/'),
                                    check_extdata_dir('rawData/control_S6/'),
                                    check_extdata_dir('rawData/control_S7/'),
                                    check_extdata_dir('rawData/control_S8/'),
                                    check_extdata_dir('rawData/case_S1/'),
                                    check_extdata_dir('rawData/case_S2/'),
                                    check_extdata_dir('rawData/case_S3/'),
                                    check_extdata_dir('rawData/case_S4/')),
                           sample_name  = c("S5", "S6", "S7", "S8", "S1", "S2", "S3", "S4"),
                           condition    = c("control", "control", "control", "control", "case",  "case",  "case",  "case"),
                           stringsAsFactors = FALSE)
hit_index <- get_hitindex(sample_frame)
res <- get_differential_inclusion(hit_index)
annotation_df <- get_annotation(load = "test")
matched <- get_matched_events_chunked(res, annotation_df$annotations, chunk_size = 2000)
x_seq <- attach_sequences(matched, annotation_df$sequences)
pairs <- get_pairs(x_seq, source="multi")
seq_compare <-compare_sequence_frame(pairs, annotation_df$annotations)

annotation_df <- get_annotation(load = 'test')
interpro_features <- get_protein_features(c("interpro"), annotations$annotations, timeout = 600, test = TRUE)
protein_feature_total <- get_comprehensive_annotations(list(interpro_features))

exon_features <- get_exon_features(annotation_df$annotations, protein_feature_total)

hits_domain <- get_domains(seq_compare, exon_features)

bg <- get_background(source = "hit_index",
                     input = sample_frame,
                     annotations = annotation_df$annotations,
                     protein_features = protein_feature_total)
ppidm <- get_ppidm(test=TRUE)

ppi <- get_isoform_interactions(protein_feature_total[ensembl_transcript_id \%in\%
                                                        annotation_df$annotations[, unique(transcript_id)]],
                                ppidm, save = FALSE, load_dir = '/projectnb2/evolution/zwakefield/proteinImpacts/', init = TRUE)


hits_final <- get_ppi_switches(hits_domain, ppi)
ppi_plot <- plot_ppi_summary(hits_final)

}
\seealso{
[ppi_switches_for_hits()]
}
