% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/get_protein_features.R
\name{to_long_features}
\alias{to_long_features}
\title{Convert wide BioMart feature table to long format (internal)}
\usage{
to_long_features(
  ipr,
  features = c("mobidblite", "seg", "ncoils", "tmhmm", "signalp"),
  include_interpro = TRUE
)
}
\arguments{
\item{ipr}{A \code{data.frame} or \code{data.table} returned from
[biomaRt::getBM()] containing per-transcript protein feature data.}

\item{features}{Character vector of feature prefixes to include
(default: \code{c("mobidblite","seg","ncoils","tmhmm","signalp")}).}

\item{include_interpro}{Logical; whether to also include InterPro
annotations if present (default \code{TRUE}).}
}
\value{
A \code{data.table} in long format with columns:
  \code{ensembl_transcript_id}, \code{ensembl_peptide_id},
  \code{database}, \code{feature_id}, \code{name}, \code{alt_name},
  \code{start}, \code{stop}, and \code{method = "biomaRt"}.
}
\description{
Internal helper that reshapes a wide BioMart results table containing
per-feature columns (e.g. InterPro, Pfam, TMHMM) into a unified long
format suitable for downstream annotation or visualization.
}
\details{
For each feature type \code{x}, the function expects columns
\code{x}, \code{x_start}, and \code{x_end}. These are combined into a
single long table. Non-InterPro features use the feature ID for all
name fields. InterPro entries optionally use the description fields
\code{interpro_description} and
\code{interpro_short_description} if available.
}
\keyword{internal}
