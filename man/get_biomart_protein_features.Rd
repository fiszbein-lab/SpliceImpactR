% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/get_protein_features.R
\name{get_biomart_protein_features}
\alias{get_biomart_protein_features}
\title{Retrieve protein feature annotations from Ensembl BioMart (internal)}
\usage{
get_biomart_protein_features(
  protein_features = c("interpro"),
  gtf_df,
  max_accession_size = 3500,
  species_dataset = "hsapiens_gene_ensembl"
)
}
\arguments{
\item{protein_features}{Character vector specifying which feature
types to request (e.g. \code{"interpro"}, \code{"pfam"}).}

\item{gtf_df}{A \code{data.frame} or \code{data.table} containing GTF
annotations; used to derive chromosome groups for batching.}

\item{max_accession_size}{Integer specifying the maximum total number
of transcripts per query batch (default \code{3500}).}

\item{species_dataset}{Character string giving the Ensembl BioMart
dataset (default \code{"hsapiens_gene_ensembl"}). For mouse, use
\code{"mmusculus_gene_ensembl"}.}
}
\value{
A \code{data.table} containing protein feature annotations
  including transcript and peptide IDs, feature start/end positions,
  and database-specific identifiers (e.g., InterPro accession).
}
\description{
Internal helper to query Ensembl BioMart for per-transcript protein
feature annotations such as InterPro or Pfam domains. Designed for
batched retrieval using [split_into_bits()] to avoid large single
queries.
}
\details{
The function queries the Ensembl BioMart service using
\pkg{biomaRt::getBM()} with filters \code{"chromosome_name"} and
\code{"transcript_biotype"}, restricted to
\code{"protein_coding"} transcripts. Queries are executed in chunks
per chromosome group to avoid API timeouts.
}
\keyword{internal}
