% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/get_frameshifts.R
\name{compare_sequence_frame}
\alias{compare_sequence_frame}
\title{Compare frame states after sequence alignment}
\usage{
compare_sequence_frame(complete_hits, ann)
}
\arguments{
\item{complete_hits}{`data.frame` or `data.table` containing complete event
information for inclusion/exclusion transcript pairs, typically from
[get_pairs()] or similar.}

\item{ann}{Annotation object (output of [get_annotation()]) used for both
sequence alignment and coding index construction.}
}
\value{
A `data.table` containing all columns from `complete_hits`, plus:
\describe{
  \item{frame_call}{Result from [compare_frames()].}
  \item{rescue}{Rescue classification.}
  \item{summary_classification}{One of `"FrameShift"`, `"Rescue"`,
  `"Match"`, or the original `pc_class`.}
}
}
\description{
Wrapper function that performs sequence alignment (via
[compare_sequences_alignment()]) and frame-shift analysis (via
[compare_frames()]) for a complete set of inclusion/exclusion transcript
pairs. It then summarizes each event by a high-level classification label.
}
\details{
`compare_sequence_frame()` is a convenience function that integrates
sequence and frame comparison stages in one call, producing an annotated
table suitable for downstream summarization or visualization.

The summary label `summary_classification` follows this precedence:
1. `"Match"` – identical protein sequences.
2. `"FrameShift"` – frame disrupted.
3. `"Rescue"` – frame restored downstream.
4. Otherwise, inherited from `pc_class`.
}
\examples{
sample_frame <- data.frame(path = c(check_extdata_dir('rawData/control_S5/'),
                                    check_extdata_dir('rawData/control_S6/'),
                                    check_extdata_dir('rawData/control_S7/'),
                                    check_extdata_dir('rawData/control_S8/'),
                                    check_extdata_dir('rawData/case_S1/'),
                                    check_extdata_dir('rawData/case_S2/'),
                                    check_extdata_dir('rawData/case_S3/'),
                                    check_extdata_dir('rawData/case_S4/')),
                           sample_name  = c("S5", "S6", "S7", "S8", "S1", "S2", "S3", "S4"),
                           condition    = c("control", "control", "control", "control", "case",  "case",  "case",  "case"),
                           stringsAsFactors = FALSE)
hit_index <- get_hitindex(sample_frame)
res <- get_differential_inclusion(hit_index)
annots <- get_annotation(load = "test")
matched <- get_matched_events_chunked(res, annots$annotations, chunk_size = 2000)
x_seq <- attach_sequences(matched, annots$sequences)
pairs <- get_pairs(x_seq, source="multi")
seq_compare <-compare_sequence_frame(pairs, annots$annotations)
}
\seealso{
[compare_frames()], [compare_sequences_alignment()]
}
